# 在线教育平台（OEP）项目需求文档

**项目名称** | 在线教育平台（Online Education Platform）
---|---
**项目简称** | OEP
**文档版本** | 1.0
**最后更新** | 2026年2月25日

---

## 目录

1. [项目概述](#项目概述)
2. [功能需求](#功能需求)
3. [系统架构](#系统架构)
4. [技术需求](#技术需求)
5. [数据模型](#数据模型)
6. [非功能需求](#非功能需求)
7. [业务流程](#业务流程)
8. [用户角色与权限](#用户角色与权限)
9. [API接口概览](#api接口概览)
10. [项目配置](#项目配置)

---

## 项目概述

### 1.1 项目定义

在线教育平台（OEP）是一个现代化的中高级在线教学与学习管理系统，支持教师创建和管理课程内容、出题组卷、发布考试和作业，学生在线学习、参加考试和提交作业，管理员进行全局监管和权限分配。

### 1.2 项目目标

- **为教师提供** 完整的教学工具链，包括课程管理、题库建设、考试出题、作业批改、数据分析
- **为学生提供** 便利的学习平台，支持在线学习、在线考试、作业提交、成绩查询
- **为管理员提供** 全局的系统管理和权限控制能力，包括用户管理、日志监控、资源审批
- **提供数据支持** 对学习过程的全面追踪和统计分析

### 1.3 项目范围

**包含的内容：**
- 用户认证与权限管理
- 课程创建与管理系统
- 题库与题目管理系统
- 在线考试系统（包括自动出卷、答题、批改）
- 作业系统（发布、提交、批改、成绩）
- 课程资源文件管理
- 数据统计与分析模块
- 系统通知与消息管理
- 系统日志与操作审计

**不包含的内容：**
- 实时视频直播功能
- 第三方系统集成
- 移动端原生应用

---

## 功能需求

### 2.1 学生端功能需求

#### 2.1.1 用户认证

| 功能 | 描述 | 约束条件 |
|------|------|--------|
| 登录 | 学生使用学号和密码登录系统 | 账户被禁用时无法登录 |
| 登出 | 清除用户会话和本地存储的令牌 | 退出后需重新登录 |

#### 2.1.2 课程学习模块

| 功能项 | 描述 | 关键需求 |
|--------|------|--------|
| 查看课程列表 | 展示学生选修的所有课程 | 需分页显示，支持搜索和排序 |
| 查看课程详情 | 显示课程名称、描述、任课教师、班级人数等信息 | 实时更新课程进度 |
| 查看课程章节 | 按照教师设定的章节结构组织学习内容 | 支持章节树形展示 |
| 学习课程内容 | 查看和学习教师上传的学习资料（如文本、文档、视频链接等） | 记录学习时间和进度 |
| 查看课程资源 | 下载课程教师上传的辅助资源文件 | 支持文件搜索/筛选 |
| 学习进度追踪 | 显示已学章节数、学习时长、完成度等数据 | 数据实时更新 |

#### 2.1.3 考试模块

| 功能项 | 描述 | 关键需求 |
|--------|------|--------|
| 查看可考试卷 | 查看已发布到该班级的考试列表及状态 | 显示考试名称、出题人、状态（未开始/进行中/已结束） |
| 参加在线考试 | 进入考试后系统生成个性化的随机试卷 | 不同学生的试卷题目顺序可能不同但总体难度相同 |
| 在线答题 | 支持多种题型的答题交互 | 支持单选、多选、判断、填空、简答题型 |
| 考试计时 | 倒计时提示，时间到自动收卷 | 支持设置考试时长，支持自动保存中间答案 |
| 查看成绩 | 在考试结束后查看本次成绩和排名 | 可查看客观题的自动评分结果 |
| 查看试卷反馈 | 查看教师的批改评语和简答题评分 | 显示标准答案、得分点分析 |

#### 2.1.4 作业模块

| 功能项 | 描述 | 关键需求 |
|--------|------|--------|
| 查看作业列表 | 查看布置的所有作业及提交状态 | 显示作业标题、截止时间、完成状态 |
| 查看作业详情 | 查看作业要求、题目内容、分值等信息 | 实时显示距截止时间的倒计时 |
| 完成作业答题 | 学生在线回答作业题目，支持保存草稿 | 支持与考试相同的题型 |
| 提交作业 | 提交完成的作业给教师批改 | 可多次修改提交，记录最后提交的版本 |
| 查看作业成绩 | 查看批改后的成绩和评语 | 显示教师反馈和改进建议 |
| 作业历史记录 | 查看历史作业记录和成绩变化 | 支持按课程筛选 |

#### 2.1.5 数据统计模块

| 功能项 | 描述 | 关键需求 |
|--------|------|--------|
| 学习数据统计 | 查看学习时长、章节完成度、资源浏览次数等 | 按课程分类统计 |
| 成绩统计 | 查看各课程的考试和作业成绩统计图表 | 支持折线图、柱状图等展示方式 |
| 学习进度分析 | 显示课程学习进度、预期完成时间 | 与其他学生进度对比（可选） |
| 个人学习报告 | 生成周期性的学习总结报告 | 包括学习时长、成绩、进度等关键指标 |

#### 2.1.6 通知模块

| 功能项 | 描述 | 关键需求 |
|--------|------|--------|
| 查看通知列表 | 查看教师和管理员发布的公告通知 | 支持分课程查看和全站通知 |
| 查看通知详情 | 阅读通知的完整内容 | 记录阅读状态 |
| 消息收件箱 | 接收来自教师的私信和系统消息 | 支持标记已读/未读 |

### 2.2 教师端功能需求

#### 2.2.1 用户认证

| 功能 | 描述 | 约束条件 |
|------|------|--------|
| 登录 | 教师使用教职工号和密码登录系统 | 账户被禁用时无法登录 |
| 登出 | 清除用户会话 | 退出后需重新登录 |

#### 2.2.2 课程管理模块

| 功能项 | 描述 | 关键需求 |
|--------|------|--------|
| 创建课程 | 教师创建新课程，设置课程名称、描述、封面等 | 课程需要管理员审批后才能正式发布 |
| 编辑课程信息 | 修改课程的基本信息 | 学生已加入的课程修改需谨慎 |
| 管理课程班级 | 将学生分配到不同班级并绑定到课程 | 支持批量导入学生 |
| 上传课程资源 | 上传课程所需的教学资源文件 | 文件大小限制为10MB以内 |
| 组织课程内容 | 创建章节、为章节添加学习内容 | 支持按照教学计划组织 |
| 查看课程统计 | 查看课程学生数、学习进度、完成率等数据 | 实时更新数据 |
| 删除课程 | 归档或删除课程（需检查是否有进行中的考试） | 删除前需确认操作 |

#### 2.2.3 题库与题目管理模块

| 功能项 | 描述 | 关键需求 |
|--------|------|--------|
| 创建题目 | 创建各种类型的题目：单选、多选、判断、填空、简答 | 可设置难度等级、所属章节、分值 |
| 编辑题目 | 修改题目内容、答案、选项等 | 已被使用的题目修改需谨慎 |
| 删除题目 | 删除不需要的题目 | 已被使用的题目需提示警告 |
| 题库分类 | 按课程、章节、难度对题目分类管理 | 支持高效的题目查询 |
| 搜索题目 | 按内容、类型、难度等条件搜索题目 | 支持模糊搜索 |
| 题目导入/导出 | 批量导入、导出题目（支持Excel、CSV格式） | 支持标准的导入模板 |
| 题目审核 | 管理员审核题目质量（可选功能） | 标记题目质量评级 |

#### 2.2.4 考试管理模块

| 功能项 | 描述 | 关键需求 |
|--------|------|--------|
| 创建试卷 | 手工或自动抽取题目组成试卷 | 可设置总分值、题目数量、难度分配 |
| 自动组卷 | 根据难度分布、题型分配自动生成试卷 | 支持设置每种题型数量和分值占比 |
| 编辑试卷 | 修改试卷名称、分值、题目顺序等 | 试卷发布后不可更改内容 |
| 封存试卷 | 用密码保护试卷，防止泄露 | 封存后需密码才能解除 |
| 发布到班级 | 将试卷发布到指定班级，设置考试时长 | 支持设置不同班级的不同考试时间 |
| 查看答卷分布 | 查看各班各学生的答卷提交情况 | 统计已交卷、未交卷学生数 |
| 批改试卷 | 批改学生的简答题和主观题 | 手动输入分值和评语 |
| 查看成绩统计 | 查看考试成绩的统计信息（平均分、分数分布、及格率等） | 生成统计图表 |
| 导出成绩单 | 将考试成绩导出为Excel格式 | 支持多种统计维度 |
| 查看学生答题情况 | 查看单个学生的答题过程和答案 | 显示答题时间、修改次数等细节 |

#### 2.2.5 作业管理模块

| 功能项 | 描述 | 关键需求 |
|--------|------|--------|
| 创建作业 | 创建新作业，题目从题库中选择 | 可设置截止时间、总分值、重试次数 |
| 添加作业题目 | 为作业选择和添加题目 | 支持按难度、章节筛选题库中的题目 |
| 发布作业 | 将作业发布到指定班级 | 支持定时发布 |
| 编辑作业 | 修改作业信息（发布前） | 发布后不可编辑题目和分值 |
| 查看学生提交情况 | 查看哪些学生已提交、未提交、逾期提交 | 支持按班级、按提交状态筛选 |
| 批改学生作业 | 对学生作业进行评分和评语 | 支持给予改进建议 |
| 发送批改反馈 | 向学生发送批改结果和评语 | 学生可收到通知 |
| 作业成绩统计 | 查看作业完成率、平均分等统计数据 | 生成统计报表 |
| 查看作业历史记录 | 查看学生的作业提交历史 | 支持对比不同版本 |

#### 2.2.6 数据分析模块

| 功能项 | 描述 | 关键需求 |
|--------|------|--------|
| 班级成绩分析 | 分析班级整体成绩分布、平均分、及格率 | 支持按考试类型分析 |
| 学生学习进度对比 | 对比班级内不同学生的学习进度 | 显示学习时长、完成度、成绩排名 |
| 题目难度分析 | 分析题目的通过率、平均得分 | 用于评估题目难度的合理性 |
| 学习热点分析 | 分析学生最常学习的章节、资料等 | 用于优化教学内容 |

#### 2.2.7 通知公告模块

| 功能项 | 描述 | 关键需求 |
|--------|------|--------|
| 发布课程通知 | 向班级学生发布教学相关通知 | 支持设置重要程度、置顶 |
| 编辑/删除通知 | 修改或删除已发布的通知 | 可查看通知阅读情况 |

### 2.3 管理员功能需求

#### 2.3.1 用户管理模块

| 功能项 | 描述 | 关键需求 |
|--------|------|--------|
| 创建用户 | 手动添加教师、学生用户 | 分配用户ID、初始密码、用户角色 |
| 导入用户 | 批量导入用户（Excel格式） | 支持学号、工号区分及自动验证 |
| 编辑用户信息 | 修改用户的基本信息（名字、邮箱、电话等） | 需同步更新登录凭证 |
| 启用/禁用用户 | 控制用户是否可以登录系统 | 禁用用户无法访问任何资源 |
| 重置密码 | 为用户重置密码 | 生成临时密码并通知用户 |
| 删除用户 | 删除用户账户和相关数据 | 删除前需确认无关键数据关联 |
| 查看用户列表 | 分页展示所有用户及其基本信息 | 支持按用户角色、状态筛选 |
| 用户权限编辑 | 为用户分配权限和角色 | 支持细粒度权限控制 |

#### 2.3.2 课程审批与管理模块

| 功能项 | 描述 | 关键需求 |
|--------|------|--------|
| 审批课程 | 审批教师创建的新课程 | 可设置审批状态（通过/驳回）并添加备注 |
| 管理所有课程 | 查看和管理系统中的所有课程 | 可关闭或删除有问题的课程 |
| 课程审计 | 查看课程的创建时间、修改时间、参与学生数等信息 | 生成课程统计报表 |

#### 2.3.3 系统监控与日志模块

| 功能项 | 描述 | 关键需求 |
|--------|------|--------|
| 查看系统日志 | 查看用户登录、重要操作等系统日志 | 支持按操作类型、用户、时间范围筛选 |
| 导出日志 | 导出系统日志用于审计和分析 | 支持Excel格式导出 |
| 查看用户操作记录 | 查看特定用户的操作历史 | 记录包括操作时间、操作内容、影响范围 |
| 系统配置 | 配置系统参数（如文件上传限制、考试时长范围等） | 需鉴权和日志记录 |

#### 2.3.4 通知与公告模块

| 功能项 | 描述 | 关键需求 |
|--------|------|--------|
| 发布系统公告 | 发布全系统的重要通知 | 对所有用户可见 |
| 管理公告 | 编辑、删除、置顶公告 | 支持查看公告阅读情况 |

---

## 系统架构

### 3.1 总体架构

系统采用前后端分离的三层架构设计：

```
┌──────────────────────────────────────────────────┐
│              表示层（Presentation Layer）          │
│  浏览器 (Vue 3 + Element Plus + 响应式UI)         │
└──────────────────────────────────────────────────┘
                      ↕ HTTP REST API (Port 8080)
┌──────────────────────────────────────────────────┐
│           业务逻辑层（Business Logic Layer）       │
│  Spring Boot 控制器、服务层、权限验证              │
│  9个主要模块、40+个业务实体                       │
└──────────────────────────────────────────────────┘
                      ↕ SQL
┌──────────────────────────────────────────────────┐
│          数据持久层（Data Access Layer）           │
│  MyBatis Plus ORM框架 + 数据库映射                │
└──────────────────────────────────────────────────┘
                      ↕ JDBC
┌──────────────────────────────────────────────────┐
│              数据库层（Data Layer）                │
│  MySQL 8.0+ (oepdb 数据库)                      │
└──────────────────────────────────────────────────┘
```

### 3.2 核心模块划分

| 模块 | 功能 | 主要类 |
|------|------|-------|
| **用户模块** | 用户认证、登录、权限管理 | UserController, UserService, User |
| **课程模块** | 课程创建、管理、资源上传 | CourseController, CourseService, Course |
| **题库模块** | 题目创建、管理、分类 | QuestionController, QuestionService, Question |
| **考试模块** | 试卷创建、自动组卷、发布、批改、成绩统计 | ExamController, ExamService, ExamPaper, ExamRecord |
| **作业模块** | 作业发布、学生提交、教师批改 | TaskController, TaskService, Task, TaskRecord |
| **班级模块** | 班级管理、学生分配 | ClassController, ClassService, StudentClass |
| **文件模块** | 文件上传、下载、管理 | FolderController, FolderService, Folder |
| **通知模块** | 公告发布、消息发送 | NoticeController, NoticeService, Notice |
| **管理模块** | 系统管理、日志查询 | ManageController, ManageService, SystemLog |

### 3.3 系统分层结构

**表示层（UI Layer）：**
- Vue 3单页应用
- Element Plus组件库
- 路由管理（46条路由规则）
- 状态通过localStorage和Vuex/Context管理

**应用层（Controller Layer）：**
- RESTful API设计
- 请求参数验证
- 错误处理和响应包装

**业务层（Service Layer）：**
- UserService - 用户相关业务逻辑
- CourseService - 课程相关业务逻辑
- ExamService - 考试和评分逻辑
- TaskService - 作业相关业务逻辑
- Mapper层 - 数据访问对象（32个）

**数据层（Persistence Layer）：**
- MyBatis Plus ORM框架
- XML映射文件
- 数据库连接池管理

---

## 技术需求

### 4.1 后端技术栈

| 技术域 | 技术选型 | 版本 | 用途 |
|-------|--------|-----|------|
| **Web框架** | Spring Boot | 2.7.6 | 应用框架 |
| **权限框架** | Spring Security | 5.7.5 | 身份认证、权限控制 |
| **ORM框架** | MyBatis Plus | 3.5.2 | 数据库映射 |
| **数据库** | MySQL | 8.0+ | 主数据存储 |
| **JWT** | JWT | 3.10.3 | Token令牌管理 |
| **工具库** | Hutool | 5.7.20 | 通用工具函数 |
| **JSON处理** | FastJSON | 1.2.83 | JSON序列化/反序列化 |
| **日志** | Log4j2 | 2.14.1 | 日志记录 |
| **文件上传** | Commons FileUpload | 1.3.3 | 文件处理 |
| **编译** | Java | 8+ | 运行环境 |

### 4.2 前端技术栈

| 技术域 | 技术选型 | 版本 | 用途 |
|-------|--------|-----|------|
| **框架** | Vue | 3.4.15 | UI框架 |
| **构建工具** | Vite | 5.0.11 | 开发/构建工具 |
| **路由** | Vue Router | 4.2.5 | 路由管理 |
| **UI组件库** | Element Plus | 2.6.0 | UI组件 |
| **HTTP客户端** | Axios | 1.6.7 | 网络请求 |
| **图表库** | ECharts | 5.5.0 | 数据可视化 |
| **编辑器** | TinyMCE Vue | 5.1.1 | 富文本编辑 |
| **编辑器** | Vue Quill | 1.2.0 | 富文本编辑 |
| **图表库** | Chart.js | 3.9.1 | 图表展示 |

### 4.3 开发工具与环境

| 工具 | 版本 | 用途 |
|------|------|------|
| Java Development Kit | 8+ | 后端开发 |
| Maven | 3.6+ | 项目构建 |
| Node.js | 16+ | 前端开发 |
| npm | 7+ | 依赖管理 |
| Git | 2.30+ | 版本控制 |

### 4.4 部署环境

- **操作系统：** Linux (Ubuntu 20.04+) / Windows Server
- **应用服务器：** Spring Boot内置Tomcat
- **数据库：** MySQL 8.0+
- **Web服务器：** Nginx（可选，用于反向代理）
- **JVM配置：** 堆内存最少2GB，建议4GB+

---

## 数据模型

### 5.1 核心实体与关系

#### 用户模块

**User（用户）**
```
属性：
- id: String (PK) - 用户ID/学号/工号
- name: String - 用户姓名
- password: String - 密码（加密存储）
- email: String - 邮箱
- phone: String - 电话
- state: int - 账户状态（1=启用，0=禁用）
- type: int - 用户类型（0=学生，1=教师，2=管理员）
- sid: int - 学校ID（外键）
- pid: int - 部门ID（外键）
```

**关键索引与约束：**
- PRIMARY KEY (id)
- FOREIGN KEY (sid) REFERENCES tb_school
- FOREIGN KEY (pid) REFERENCES tb_department

#### 课程模块

**Course（课程）**
```
属性：
- id: int (PK, AUTO_INCREMENT) - 课程ID
- name: String - 课程名称
- uid: String - 创建者用户ID（外键）
- sid: int - 学校ID
- pid: int - 部门ID
- descr: String - 课程描述
- cover: String - 课程封面图片路径
```

**Chapter（章节）**
```
属性：
- id: int (PK, AUTO_INCREMENT) - 章节ID
- name: String - 章节名称
- courseid: int (FK) - 课程ID
- ordernum: int - 章节顺序号
```

**Content（学习内容）**
```
属性：
- id: int (PK, AUTO_INCREMENT) - 内容ID
- chapterid: int (FK) - 章节ID
- name: String - 内容标题
- content: String - 内容正文（HTML格式）
- createtime: String - 创建时间
- updatetime: String - 更新时间
```

**CourseClass（课程班级关联）**
```
属性：
- id: int (PK) - 关联ID
- courseid: int (FK) - 课程ID
- classid: int (FK) - 班级ID
- createtime: String - 关联时间
```

**StudentClass（学生班级关联）**
```
属性：
- id: int (PK) - 关联ID
- sid: String (FK) - 学生ID
- classid: int (FK) - 班级ID
- jointime: String - 加入班级时间
```

#### 题库模块

**Question（题目）**
```
属性：
- id: int (PK, AUTO_INCREMENT) - 题目ID
- type: String - 题目类型（'single'=单选,'multi'=多选,'judge'=判断,'blank'=填空,'short'=简答）
- level: String - 难度等级（'easy', 'medium', 'hard'）
- content: String - 题目内容
- answer: String - 标准答案
- option1, 2, 3, 4: String - 选项（选择题类型）
- folderid: int (FK) - 题库分类ID
- createtime: String - 创建时间
- creator: String (FK) - 创建者用户ID
- questiontype: int - 题型分类
- dirty: int - 是否已被使用或删除标记
- courseid: int (FK) - 所属课程ID
```

**Folder（题库分类/文件夹）**
```
属性：
- id: int (PK) - 分类ID
- name: String - 分类名称
- pid: int - 父分类ID（支持嵌套）
```

#### 考试模块

**ExamPaper（试卷）**
```
属性：
- id: int (PK, AUTO_INCREMENT) - 试卷ID
- name: String - 试卷名称
- score: int - 总分值
- count: int - 题目总数
- level: String - 试卷难度
- courseid: int (FK) - 课程ID
- creator: String (FK) - 创建者用户ID
- createtime: String - 创建时间
- type: String - 试卷类型（'auto'=自动组卷,'manual'=手动）
- folderid: int (FK) - 分类ID
- sealflag: int - 封存标记（1=已封存,0=未封存）
- password: String - 封存密码
```

**PaperQuestion（试卷题目关联）**
```
属性：
- id: int (PK) - 关联ID
- paperid: int (FK) - 试卷ID
- questionid: int (FK) - 题目ID
- number: int - 试卷版本号（用于随机卷）
- questionorder: int - 题目在试卷中的顺序
```

**ExamPaperRelease（试卷发布）**
```
属性：
- id: int (PK) - 发布ID
- paperid: int (FK) - 试卷ID
- classid: int (FK) - 班级ID
- starttime: Timestamp - 考试开始时间
- endtime: Timestamp - 考试结束时间
- duration: int - 考试时长（分钟）
- status: String - 发布状态（'draft','published','closed'）
- creator: String (FK) - 发布者用户ID
- createtime: String - 发布时间
```

**ExamRecord（考试记录）**
```
属性：
- id: int (PK) - 记录ID
- sid: String (FK) - 学生ID
- sname: String - 学生姓名
- paperid: int (FK) - 试卷ID
- classid: int (FK) - 班级ID
- starttime: Timestamp - 开始答卷时间
- endtime: Timestamp - 结束答卷时间
- status: String - 答卷状态（'draft','submitted','reviewed'）
- score: Double - 得分
- number: int - 随机卷版本号
```

**AnswerRecord（答题记录）**
```
属性：
- id: int (PK) - 记录ID
- examrecordid: int (FK) - 考试记录ID
- questionid: int (FK) - 题目ID
- studentanswer: String - 学生答案
- isright: Boolean - 答案是否正确
- score: Double - 得分
- answertime: Timestamp - 答题时间
```

#### 作业模块

**Task（作业）**
```
属性：
- id: int (PK, AUTO_INCREMENT) - 作业ID
- name: String - 作业标题
- score: int - 总分值
- courseid: int (FK) - 课程ID
- createtime: String - 创建时间
- creator: String (FK) - 创建者用户ID
- type: String - 作业类型
- folderid: int (FK) - 分类ID
```

**TaskRelease（作业发布）**
```
属性：
- id: int (PK) - 发布ID
- taskid: int (FK) - 作业ID
- classid: int (FK) - 班级ID
- starttime: Timestamp - 发布时间
- endtime: Timestamp - 截止时间
- status: String - 发布状态
- creator: String (FK) - 发布者用户ID
```

**TaskQuestion（作业题目关联）**
```
属性：
- id: int (PK) - 关联ID
- taskid: int (FK) - 作业ID
- questionid: int (FK) - 题目ID
- questionorder: int - 题目顺序
```

**TaskRecord（学生作业记录）**
```
属性：
- id: int (PK) - 记录ID
- taskid: int (FK) - 作业ID
- sid: String (FK) - 学生ID
- sname: String - 学生姓名
- status: String - 提交状态（'draft','submitted','reviewed'）
- submittime: Timestamp - 提交时间
- score: Double - 得分
- comment: String - 教师评语
```

**TaskAnswerRecord（作业答题记录）**
```
属性：
- id: int (PK) - 记录ID
- taskrecordid: int (FK) - 作业记录ID
- questionid: int (FK) - 题目ID
- studentanswer: String - 学生答案
- score: Double - 得分
- answertime: Timestamp - 答题时间
```

#### 通知模块

**Notice（通知）**
```
属性：
- id: int (PK) - 通知ID
- title: String - 标题
- content: String - 内容（HTML格式）
- courseid: int (FK) - 课程ID（如果为0则为系统通知）
- creator: String (FK) - 发布者用户ID
- createtime: String - 创建时间
- importance: int - 重要程度
- istop: int - 是否置顶
```

#### 系统模块

**SystemLog（系统日志）**
```
属性：
- id: int (PK) - 日志ID
- uid: String (FK) - 用户ID
- action: String - 操作动作
- actiontype: String - 操作类型
- content: String - 详细内容
- createtime: String - 操作时间
- ipaddress: String - IP地址
- operationresult: String - 操作结果
```

**School（学校）**
```
属性：
- id: int (PK) - 学校ID
- name: String - 学校名称
```

**Department（部门）**
```
属性：
- id: int (PK) - 部门ID
- name: String - 部门名称
- sid: int (FK) - 学校ID
```

### 5.2 数据库统计

- **表数量：** 32个表
- **实体类数量：** 40+个（包括扩展视图模型）
- **关键表关系：** 主要采用外键关联，支持多对多关系

---

## 非功能需求

### 6.1 性能需求

| 需求项 | 标准 | 说明 |
|--------|------|------|
| **页面加载时间** | <3秒 | 首页、主要功能页面需在3秒内加载完成 |
| **API响应时间** | <500ms | 95%的API请求响应时间需在500ms以内 |
| **并发用户数** | 1000+ | 支持至少1000个并发用户同时在线 |
| **数据库查询性能** | <200ms | 复杂查询（如成绩统计）需在200ms内完成 |
| **文件上传** | 支持10MB以内文件 | 超限制需提示用户 |
| **考试系统计时精度** | ±1秒 | 考试倒计时误差不超过1秒 |

### 6.2 可用性需求

| 需求项 | 标准 | 说明 |
|--------|------|------|
| **系统可用性** | 99.5% | 月度可用时间不低于99.5% |
| **备份与恢复** | 每天备份一次 | 数据库每天自动备份，支持7天内恢复 |
| **故障恢复时间** | <30分钟 | RTO（恢复时间目标）不超过30分钟 |
| **数据丢失** | 0% | RPO（恢复点目标）为0，不接受任何数据丢失 |

### 6.3 安全性需求

| 需求项 | 要求 | 说明 |
|--------|------|------|
| **身份认证** | 强制 | 所有用户必须登录，使用JWT Token验证 |
| **权限控制** | 细粒度 | 基于用户角色的权限管理，防止越权 |
| **密码安全** | 加密存储 | 密码使用Spring Security密码编码器加密 |
| **传输安全** | HTTPS | 生产环境必须使用HTTPS加密传输 |
| **SQL注入防护** | 强制 | 使用参数化查询，禁止字符串拼接SQL |
| **XSS防护** | 强制 | 前端HTML转义，后端内容验证 |
| **CSRF防护** | 建议 | 通过Token验证防止跨站请求伪造 |
| **访问控制** | 强制 | 学生只能访问自己的考试、作业、成绩数据 |
| **日志记录** | 必须 | 记录所有重要操作和系统事件 |
| **密钥管理** | 安全 | JWT密钥需安全保管，定期轮换 |

### 6.4 可维护性需求

| 需求项 | 要求 | 说明 |
|--------|------|------|
| **代码质量** | 规范 | 遵循Java编码规范，使用Lombok减少样板代码 |
| **文档** | 完整 | 提供API文档、数据库设计文档、部署手册 |
| **日志输出** | 详细 | 包含级别（DEBUG、INFO、WARN、ERROR）和上下文 |
| **可扩展性** | 模块化 | 模块之间松耦合，便于后续扩展 |
| **版本控制** | Git | 使用Git进行版本管理，遵循分支管理策略 |

### 6.5 兼容性需求

| 需求项 | 要求 | 说明 |
|--------|------|------|
| **浏览器兼容性** | 现代浏览器 | Chrome 90+, Firefox 88+, Safari 14+, Edge 90+ |
| **操作系统** | 跨平台 | Windows, macOS, Linux |
| **分辨率适配** | 响应式 | 支持1920x1080、1600x900等常见分辨率 |
| **移动端** | 优雅降级 | 在移动设备上可用但不推荐（无原生App） |

### 6.6 运维需求

| 需求项 | 要求 | 说明 |
|--------|------|------|
| **日志存储** | Log4j2 | 应用日志分级别存储，支持按日期轮换 |
| **监控告警** | 可选 | 建议配置性能监控、错误告警 |
| **数据库维护** | 预案 | 定期维护索引，统计信息更新 |
| **配置管理** | 集中 | 敏感配置使用环境变量或配置中心 |

---

## 业务流程

### 7.1 学生学习流程

```
┌─────────────┐
│   学生登录   │
└────┬────────┘
     │
     ↓
┌──────────────────┐
│  查看课程列表    │
│  选择进入课程    │
└────┬─────────────┘
     │
     ├─→ 学习课程内容 ──┐
     │    (按章节)      │
     │                  ├─→ 学习进度统计 ──┐
     ├─→ 下载资源文件 ──┤                  │
     │                  │                  ├─→ 个人学习报告
     ├─→ 参加考试 ──────┤                  │
     │                  │                  │
     ├─→ 提交作业 ──────┤                  │
     │                  └──────────────────┘
     │
     ↓
┌──────────────────┐
│  查看成绩/评语   │
└──────────────────┘
```

### 7.2 教师教学流程

```
┌─────────────┐
│   教师登录   │
└────┬────────┘
     │
     ↓
┌────────────────────┐
│  创建并组织课程    │ ──→ 管理员审批
└────┬───────────────┘
     │
     ├─→ 组织课程内容
     │   (上传资源、创建章节)
     │                        ┌─────────────────┐
     ├─→ 建设题库            │  学生参加考试   │
     │   (创建题目、分类)  ←─→│                │
     │                        │ 学生提交作业   │
     ├─→ 创建试卷            │                 │
     │   (手动/自动)  ─────→  │ 学生完成答题   │
     │                        └────────┬────────┘
     ├─→ 发布考试                      │
     │   (设置班级、时间)              ↓
     │                     ┌──────────────────┐
     ├─→ 发布作业  ────→  │  教师批改评分   │
     │   (设置截止时间)   │                  │
     │                     │  发送反馈评语   │
     │                     └──────────────────┘
     │
     ├─→ 查看数据统计
     │   (成绩分析、学习进度)
     │
     ├─→ 发布课程通知
     │
     ↓
┌────────────────────┐
│  课程教学完成      │
└────────────────────┘
```

### 7.3 考试业务流程详解

```
教师创建试卷
    │
    ├─→ 手动添加题目
    │   或自动组卷
    │
    ├─→ 设置试卷参数
    │   (总分、难度)
    │
    ├─→ 试卷封存
    │   (可选，用密码保护)
    │
    ↓
┌──────────────────────┐
│  试卷发布到班级      │
│  设置考试时间/时长   │
└──┬───────────────────┘
   │
   ├─→ 学生进入考试
   │   (验证时间、身份)
   │
   ├─→ 生成随机试卷
   │   (不同学生题目顺序可能不同)
   │
   ├─→ 学生在线答题
   │   (支持倒计时、自动保存)
   │
   ├─→ 学生提交试卷
   │
   ↓
┌──────────────────────┐
│  自动评分客观题      │
│  (单选、多选、判断)   │
└──┬───────────────────┘
   │
   ├─→ 教师进入批改
   │
   ├─→ 批改主观题
   │   (填空题、简答题)
   │
   ├─→ 确认最终成绩
   │
   ↓
┌──────────────────────┐
│  学生查看成绩        │
│  查看测卷反馈        │
└──────────────────────┘
```

### 7.4 作业业务流程详解

```
教师创建作业
    │
    ├─→ 选择题目
    │   (从题库中选取)
    │
    ├─→ 设定作业参数
    │   (总分、截止时间)
    │
    ├─→ 发布到班级
    │
    ↓
┌──────────────────────┐
│ 学生查看作业列表     │
└──┬───────────────────┘
   │
   ├─→ 进入作业详情
   │   (查看题目/要求)
   │
   ├─→ 完成作业答题
   │   (可保存草稿)
   │
   ├─→ 提交作业
   │   (可在截止前修改)
   │
   ↓
┌──────────────────────┐
│ 教师进入作业批窗     │
│ 查看学生提交情况     │
└──┬───────────────────┘
   │
   ├─→ 批改学生作业
   │   (评分、评语)
   │
   ├─→ 发送批改反馈
   │
   ↓
┌──────────────────────┐
│ 学生查看成绩/评语    │
│ 查看改进建议         │
└──────────────────────┘
```

---

## 用户角色与权限

### 8.1 用户角色定义

| 角色 | 代码 | 描述 | 主要权限 |
|------|------|------|--------|
| **学生** | 0 | 参加教学活动，完成学习任务 | 查看课程、参加考试、提交作业、查看成绩、下载资源 |
| **教师** | 1 | 创建和管理课程、题库、考试、作业 | 创建课程、上传资源、创建题目、发布考试、批改作业、查看统计 |
| **管理员** | 2 | 系统全局管理和监督 | 用户管理、课程审批、系统监控、日志查询、权限分配 |

### 8.2 权限控制矩阵

#### 课程模块权限

| 操作 | 学生 | 教师 | 管理员 |
|------|------|------|--------|
| 创建课程 | ✗ | ✓ | ✓ |
| 编辑自己创建的课程 | ✗ | ✓ | ✓ |
| 审批课程 | ✗ | ✗ | ✓ |
| 删除课程 | ✗ | ✓(仅自己的) | ✓ |
| 查看课程内容 | ✓(已就读) | ✓(自己的) | ✓ |
| 上传课程资源 | ✗ | ✓(自己的) | ✓ |
| 管理班级学生 | ✗ | ✓(自己的) | ✓ |

#### 考试模块权限

| 操作 | 学生 | 教师 | 管理员 |
|------|------|------|--------|
| 创建试卷 | ✗ | ✓ | ✓ |
| 编辑试卷 | ✗ | ✓(发布前) | ✓ |
| 发布考试 | ✗ | ✓ | ✓ |
| 参加考试 | ✓(已发布) | ✗ | ✗ |
| 查看自己的成绩 | ✓ | ✗ | ✗ |
| 查看班级成绩 | ✗ | ✓ | ✓ |
| 批改主观题 | ✗ | ✓ | ✓ |
| 导出成绩 | ✗ | ✓ | ✓ |
| 删除考试记录 | ✗ | ✗ | ✓ |

#### 题库模块权限

| 操作 | 学生 | 教师 | 管理员 |
|------|------|------|--------|
| 创建题目 | ✗ | ✓ | ✓ |
| 编辑自己创建的题目 | ✗ | ✓ | ✓ |
| 删除自己创建的题目 | ✗ | ✓ | ✓ |
| 查看题库 | ✗ | ✓ | ✓ |
| 搜索题目 | ✗ | ✓ | ✓ |
| 导入/导出题目 | ✗ | ✓ | ✓ |
| 题目审核 | ✗ | ✗ | ✓(可选) |

#### 用户管理权限

| 操作 | 学生 | 教师 | 管理员 |
|------|------|------|--------|
| 查看自己的信息 | ✓ | ✓ | ✓ |
| 修改自己的信息 | ✓ | ✓ | ✓ |
| 修改密码 | ✓ | ✓ | ✓ |
| 创建用户 | ✗ | ✗ | ✓ |
| 导入用户 | ✗ | ✗ | ✓ |
| 删除用户 | ✗ | ✗ | ✓ |
| 启用/禁用用户 | ✗ | ✗ | ✓ |
| 查看所有用户 | ✗ | ✗ | ✓ |
| 查看系统日志 | ✗ | ✗ | ✓ |

---

## API接口概览

### 9.1 用户管理API

**POST /user/login**
- 请求：用户ID、密码
- 响应：用户信息、JWT Token
- 权限：无（公开）

### 9.2 课程管理API

**POST /course/create** - 创建课程
- 权限：教师、管理员

**POST /course/update** - 编辑课程信息
- 权限：课程所有者、管理员

**GET /course/list** - 获取课程列表
- 权限：已认证用户

**GET /course/{id}** - 获取课程详情
- 权限：已认证用户

**POST /course/addStudent** - 添加学生到班级
- 权限：课程成有者、管理员

### 9.3 题目管理API

**POST /question/create** - 创建题目
- 权限：教师、管理员

**POST /question/update** - 编辑题目
- 权限：题目创建者、管理员

**GET /question/list** - 获取题库列表
- 权限：教师、管理员

**POST /question/search** - 搜索题目
- 权限：教师、管理员

### 9.4 考试管理API

**POST /exam/create** - 创建试卷
- 权限：教师、管理员

**POST /exam/release** - 发布考试到班级
- 权限：教师、管理员

**POST /exam/getExamPaper** - 学生进入考试并获取试卷
- 权限：学生

**POST /exam/submitExamPaper** - 学生提交试卷
- 权限：学生

**POST /exam/updateReviewRecord** - 教师批改主观题
- 权限：教师、管理员

**POST /exam/selectByExamId** - 查看班级学生答卷记录
- 权限：教师、管理员

### 9.5 作业管理API

**POST /task/create** - 创建作业
- 权限：教师、管理员

**POST /task/release** - 发布作业
- 权限：教师、管理员

**POST /task/getTask** - 学生获取作业详情
- 权限：学生

**POST /task/submitTask** - 学生提交作业
- 权限：学生

**POST /task/reviewTask** - 教师批改作业
- 权限：教师、管理员

### 9.6 通知管理API

**POST /notice/publish** - 发布通知
- 权限：教师、管理员

**GET /notice/list** - 获取通知列表
- 权限：已认证用户

**GET /notice/{id}** - 获取通知详情
- 权限：已认证用户

### 9.7 管理员API

**POST /manage/user/create** - 创建用户
- 权限：管理员

**POST /manage/user/import** - 批量导入用户
- 权限：管理员

**GET /manage/logs** - 查看系统日志
- 权限：管理员

**POST /manage/logs/export** - 导出日志
- 权限：管理员

---

## 项目配置

### 10.1 后端配置文件（application.yml）

```yaml
server:
  port: 8080

spring:
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB
  application:
    name: content-api
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/oepdb?serverTimezone=UTC&useUnicode=true&useSSL=false
    username: root
    password: 123456

mybatis-plus:
  configuration:
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl

logging:
  level:
    com.zijin.oep: debug
    org.springframework: warn

custom:
  upload:
    dir: uploads/
```

### 10.2 前端配置

**开发脚本：**
```bash
npm run dev     # 启动开发服务器（Vite）
npm run build   # 生产打包
npm run preview # 预览打包结果
```

**API配置：**
- 开发环境：http://localhost:8080
- 生产环境：根据部署配置

### 10.3 数据库初始化

**数据库名称：** oepdb
**字符集：** UTF-8
**初始用户：**
- 系统默认管理员（需通过初始化脚本创建）
- 示例教师、学生用户

### 10.4 部署注意事项

1. **数据库准备**
   - 创建oepdb数据库
   - 导入初始化SQL脚本
   - 配置用户权限

2. **后端部署**
   - 设置JAVA_HOME环境变量
   - 配置application.yml（数据库、端口等）
   - 构建：`mvn clean package`
   - 运行：`java -jar target/OnlineEducationPlatform-xxx.jar`

3. **前端部署**
   - 安装依赖：`npm install`
   - 构建：`npm run build`
   - 部署dist文件夹到Web服务器
   - 配置反向代理指向后端API

4. **防火墙配置**
   - 开放端口8080（或配置的后端端口）
   - 配置HTTPS（生产环境）

5. **性能优化**
   - 启用JVM垃圾回收调优
   - 配置数据库连接池
   - 启用前端代码压缩和缓存

---

## 附录

### A. 术语表

| 术语 | 解释 |
|------|------|
| **试卷** | 由一定数量的题目组成，用于考试的组合体 |
| **题库** | 存储各种题目的数据集合，供出卷使用 |
| **自动组卷** | 系统根据配置的题目数量、难度等自动生成试卷 |
| **随机试卷** | 为每个学生生成不同题目顺序的试卷 |
| **主观题** | 需要人工评分的题目（如简答题） |
| **客观题** | 可自动评分的题目（如单选、多选、判断） |
| **班级** | 学生的组织单位，与课程关联 |
| **章节** | 课程内容的组织单位 |
| **资源** | 课程中上传的各种教学材料 |

### B. 常见问题解答

**Q: 考试时间到了学生还没提交，会自动收卷吗？**
A: 是的，系统会在设定的考试结束时间自动收卷，学生将无法继续答题。建议在考试前明确告知学生时间限制。

**Q: 教师可以修改学生已提交的试卷分数吗？**
A: 可以。教师在批改模式下可以修改主观题的分数和评语。

**Q: 学生可以重复参加同一个考试吗？**
A: 取决于发布考试时的配置。教师可以设置是否允许重试。

**Q: 作业是否支持迟交？**
A: 可以在截止时间后继续提交，但可能被标记为迟交。具体规则由教师设定。

**Q: 系统是否支持题目分享？**
A: 目前不支持直接分享，但教师可以导出题目后导入其他课程。

---

**文档发布日期：** 2026年2月25日
**版本：** 1.0
**状态：** 草稿

---
